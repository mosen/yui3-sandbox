YUI.add("gallery-datatable-tableevents",function(a){function c(){}var b=a.Lang;c.ATTRS={events:{value:["keydown","keyup","mousedown","mouseup","click","mouseover","mouseout","mouseenter","mouseleave","hover"],setter:function(b){var c=this.get("events"),d=c?a.Array.hash(c):{},e=!1,f,g;b=a.Array(b),f=a.Array.hash(b);for(g in f)if(d.hasOwnProperty(g))delete d[g];else{e=!0;break}return e||(e=a.Object.size(d)),e?b:a.Attribute.INVALID_VALUE}},tags:{value:["table","thead","tbody","tfoot",{tag:"tr",name:"row"},{tag:"th",name:"cell"},{tag:"td",name:"cell"}]}},c.prototype={initializer:function(){this.after("render",this._bindTableEvents,this),this.after("eventsChange",this._afterEventsChange)},destructor:function(){this._handle&&this._handle.detach(),delete this._handle},_bindTableEvents:function(){var a=this.get("events"),c=this.get("tags"),d={},e=[],f,g;for(f=c.length-1;f>=0;--f)g=c[f],b.isString(g)&&(g={tag:g,name:g}),d[g.tag]=g,e.push(g.tag);this._tag_map=d,this._handle=this.get("contentBox").delegate(a,this._handleTableEvent,e.join(","),this)},_afterEventsChange:function(a){this._bindTableEvents(a.newVal)},_handleTableEvent:function(a){var b=this._tag_map,c=a.currentTarget.get("tagName").toLowerCase(),d={node:a.currentTarget,type:a.type.charAt(0).toUpperCase()+a.type.slice(1),tag:c,tagHuman:b[c]?b[c].name:c,relatedTag:a.relatedTarget===null||a.relatedTarget===undefined?"":a.relatedTarget.get("tagName").toLowerCase(),inThead:a.currentTarget.getData("inThead"),inTfoot:a.currentTarget.getData("inTfoot"),isHover:/^mouse(?:over|out|enter|leave)$/.test(a.type)?!0:!1};!d.inThead&&d.inThead!==!1&&(d.inThead=d.node!==this._theadNode&&this._theadNode.contains(d.node),d.node.setData("inThead",d.inThead)),this._tfootNode&&!d.inTfoot&&d.inTfoot!==!1&&(d.inTfoot=d.node!==this._tfootNode&&this._tfootNode.contains(d.node),d.node.setData("inTfoot",d.inTfoot)),this._notifySubscribers(a,d)},_fireTableEvent:function(a,b){return this.fire(a,b)===!0?!0:(b.event.stopPropagation(),!1)},_notifySubscribers:function(a,b){var c,d,e={event:a,currentTarget:a.currentTarget,node:b.node,inThead:b.inThead,inTfoot:b.inTfoot,header:b.tag==="th"},f;b.isHover?b.tag==="td"||b.tag==="th"?this._fireTableEvent(b.tagHuman+b.type,e)&&(c=b.tag==="td"?b.node.getAttribute("headers"):b.node.get("id"),d=this.resolveRelatedColumn(a.relatedTarget),c!==d&&this._fireTableEvent("column"+b.type,e)):b.tag==="tr"&&(a.relatedTarget===null||b.node!==a.relatedTarget.ancestor("tr"))&&this._fireTableEvent(b.tagHuman+b.type,e):(f=this._fireTableEvent(b.tagHuman+b.type,e),f&&(b.tag==="td"||b.tag==="th")&&this._fireTableEvent("column"+b.type,e))},resolveRelatedColumn:function(a){var b,c=a!==null?a.get("tagName").toLowerCase():null,d=null;switch(c){case"td":d=a.getAttribute("headers");break;case"th":d=a.get("id");break;case"div":b=a.get("parentNode"),b.get("tagName").toLowerCase()==="th"?d=b.get("id"):b.get("tagName").toLowerCase()==="td"&&(d=b.getAttribute("headers"))}return d}},a.namespace("DataTable.Features").TableEvents=c,a.Base.mix(a.DataTable.Base,[a.DataTable.Features.TableEvents])},"1.0.0",{requires:["datatable"]})