YUI.add("gallery-datatable-tableevents",function(c){var a=c.Lang;function b(){}b.ATTRS={events:{value:["keydown","keyup","mousedown","mouseup","click","mouseover","mouseout","mouseenter","mouseleave","hover"],setter:function(i){var h=this.get("events"),g=h?c.Array.hash(h):{},d=false,f,e;i=c.Array(i);f=c.Array.hash(i);for(e in f){if(g.hasOwnProperty(e)){delete g[e];}else{d=true;break;}}d||(d=c.Object.size(g));if(!d){return c.Attribute.INVALID_VALUE;}else{return i;}}},tags:{value:["table","thead","tbody",{tag:"tr",name:"row"},{tag:"th",name:"cell"},{tag:"td",name:"cell"}]}};b.prototype={initializer:function(){this.after("render",this._bindTableEvents,this);this.after("eventsChange",this._afterEventsChange);},destructor:function(){this._handle&&this._handle.detach();delete this._handle;},_bindTableEvents:function(){var h=this.get("events"),f=this.get("tags"),e={},j=[],g,d;for(g=f.length-1;g>=0;--g){d=f[g];if(a.isString(d)){d={tag:d,name:d};}e[d.tag]=d;j.push(d.tag);}this._tag_map=e;this._handle=this.get("contentBox").delegate(h,this._handleTableEvent,j.join(","),this);},_afterEventsChange:function(d){this._bindTableEvents(d.newVal);},_handleTableEvent:function(h){var f=this._tag_map,d=h.currentTarget.get("tagName").toLowerCase(),g={node:h.currentTarget,type:h.type.charAt(0).toUpperCase()+h.type.slice(1),tag:d,tagHuman:f[d]?f[d].name:d,relatedTag:(h.relatedTarget===null)?"":h.relatedTarget.get("tagName").toLowerCase(),inThead:h.currentTarget.getData("inThead"),isHover:/^mouse(?:over|out|enter|leave)$/.test(h.type)?true:false};if(!g.inThead&&g.inThead!==false){g.inThead=(g.node!==this._theadNode&&this._theadNode.contains(g.node));g.node.setData("inThead",g.inThead);}this._notifySubscribers(h,g);},_fireTableEvent:function(d,e){if(this.fire(d,e)===true){return true;}else{e.event.stopPropagation();return false;}},_notifySubscribers:function(i,h){var f,j,g={event:i,currentTarget:i.currentTarget,node:h.node,inThead:h.inThead,header:(h.tag=="th")},d;if(h.isHover){if(h.tag=="td"||h.tag=="th"){if(this._fireTableEvent(h.tagHuman+h.type,g)){f=(h.tag=="td")?h.node.getAttribute("headers"):h.node.get("id");j=this.resolveRelatedColumn(i.relatedTarget);if(f!=j){this._fireTableEvent("column"+h.type,g);}}}else{if(h.tag=="tr"){if(i.relatedTarget===null||h.node!==i.relatedTarget.ancestor("tr")){this._fireTableEvent(h.tagHuman+h.type,g);}}}}else{d=this._fireTableEvent(h.tagHuman+h.type,g);if(d&&(h.tag=="td"||h.tag=="th")){this._fireTableEvent("column"+h.type,g);}}},resolveRelatedColumn:function(f){var g,e=(f!==null)?f.get("tagName").toLowerCase():null,d=null;switch(e){case"td":d=f.getAttribute("headers");break;case"th":d=f.get("id");break;case"div":g=f.get("parentNode");if(g.get("tagName").toLowerCase()=="th"){d=g.get("id");}else{if(g.get("tagName").toLowerCase()=="td"){d=g.getAttribute("headers");}}break;}return d;}};c.namespace("DataTable.Features").TableEvents=b;c.Base.mix(c.DataTable.Base,[c.DataTable.Features.TableEvents]);},"@VERSION@",{optional:["pluginattr"],requires:["datatable"]});