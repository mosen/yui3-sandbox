YUI.add("gallery-datatable-ml-footer",function(a){var b=a.Lang,c=a.ClassNameManager.getClassName,d="datatable",e=c(d,"liner"),f={right:"-align-right",left:"-align-left",center:"-align-center"},g=a.Node;a.namespace("DP").DatatableMlFooter=a.Base.create("gallery-datatable-ml-footer",a.Plugin.Base,[],{initializer:function(a){this.afterHostMethod("render",this._renderFooter),this.afterHostMethod("_afterModelListChange",this._renderColumnValues),this.afterHostMethod("_afterModelListAdd",this._renderColumnValues),this.afterHostMethod("_afterModelListRemove",this._renderColumnValues),this.afterHostMethod("_afterModelChange",this._renderColumnValues)},destructor:function(){},_renderFooter:function(){var b=this.get("columnset");this._tfoot=g.create(a.substitute(this.get("tfootTemplate"),{tfootClassName:this.get("host").getClassName("footer","tfoot"),trClassName:this.get("host").getClassName("footer","tr")})),this.get("host").get("contentBox").one("table").append(this._tfoot)},_renderColumnValues:function(){var c=this.get("columnset"),d,h=this._tfoot.one("tr"),i="",j=1,k="";h.set("innerHTML",""),a.Array.each(c,function(c){b.isFunction(c.value)?i=c.value(this.get("host").get("models")):i=c.value,c.span!==undefined?j=c.span:j=1,c.align!==undefined?k=f[c.align]:k=f.left,d=g.create(a.substitute(this.get("tdTemplate"),{tdClassName:this.get("host").getClassName("footer","col"),linerClassName:e+" "+e+k,tdColSpan:j,value:i})),h.append(d)},this)}},{_tfoot:undefined,NAME:"datatableFooter",NS:"dtfoot",ATTRS:{columnset:{value:Array()},tfootTemplate:{value:'<tfoot class="{tfootClassName}"><tr class="{trClassName}"></tr></tfoot>'},tdTemplate:{value:'<td class="{tdClassName}" colspan="{tdColSpan}"><div class="{linerClassName}">{value}</div></td>'}},calculatePriceTotal:function(c,d){return function(e){var f=0;return e.each(function(b){f+=a.DataType.Number.parse(b.get(c))}),b.isObject(d)||(d={prefix:"$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2}),a.DataType.Number.format(f,d)}},calculateAminusB:function(c,d,e){return function(f){var g=0;return f.each(function(b){var e=a.DataType.Number.parse(b.get(c))||0,f=a.DataType.Number.parse(b.get(d))||0;g+=e-f}),b.isObject(e)||(e={prefix:"$",thousandsSeparator:",",decimalSeparator:".",decimalPlaces:2}),a.DataType.Number.format(g,e)}},calculateAPercentOfB:function(c,d,e){return function(f){var g=0,h=0,i=0,j=0;return f.each(function(b){var e=a.DataType.Number.parse(b.get(c))||0,f=a.DataType.Number.parse(b.get(d))||0;g+=e,h+=f}),i=g-h,i==0||i<0?j=0:h==0?j=100:j=i/h*100,b.isObject(e)||(e={suffix:"%",decimalSeparator:".",decimalPlaces:2}),a.DataType.Number.format(j,e)}}})},"1.0.0",{skinnable:!0})