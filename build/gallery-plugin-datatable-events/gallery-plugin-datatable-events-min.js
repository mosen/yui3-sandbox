YUI.add("gallery-plugin-datatable-events",function(c){var a=c.Lang;function b(){b.superclass.constructor.apply(this,arguments);}c.mix(b,{NS:"events",NAME:"events",ATTRS:{events:{value:["keydown","keyup","mousedown","mouseup","click"],setter:function(i){var h=this.get("events"),g=h?c.Array.hash(h):{},f=false,e,d;i=c.Array(i);e=c.Array.hash(i);for(d in e){if(e.hasOwnProperty(d)){delete g[d];}else{f=true;break;}}f||(f=c.Object.size(g));if(!f){i=h;}return i;}},tags:{value:["table","thead","tbody",{tag:"tr",name:"row"},{tag:"th",name:"cell"},{tag:"td",name:"cell"}]}}});c.extend(b,c.Plugin.Base,{initializer:function(){this.afterHostEvent("render",this._bindEvents,this);this.after("eventsChange",this._afterEventsChange);},destructor:function(){this._handle&&this._handle.detach();delete this._handle;},_publishEvents:function(){},_bindEvents:function(){var h=this.get("events"),f=this.get("tags"),e={},j=[],g,d;for(g=f.length-1;g>=0;--g){d=f[g];if(a.isString(d)){d={tag:d,name:d};}e[d.tag]=d;j.push(d.tag);}this._tag_map=e;this._handle=this.get("host").get("contentBox").delegate(h,this._handleEvent,j.join(","),this);},_afterEventsChange:function(d){this._bindEvents(d.newVal);},_handleEvent:function(d){if(/^mouse(?:over|out|enter|leave)$/.test(d.type)){this._handleHoverEvent(d);}else{this._notify(d);}},_handleHoverEvent:function(d){},_notify:function(h){var g=h.currentTarget,l=this.get("host"),i=l._theadNode,j=h.type.charAt(0).toUpperCase()+h.type.slice(1),m=g.get("tagName").toLowerCase(),d=g.getData("inThead"),f=this._tag_map,k={event:h,target:h.target,currentTarget:g};if(!d&&d!==false){d=(g!==i&&i.contains(g));g.setData("inThead",d);}if(f[m]){m=f[m].name;}if(d){m="thead"+m.charAt(0).toUpperCase()+m.slice(1);}switch(m){case"cell":k.record=l.get("recordset").getRecord(g.get("parentNode").get("id"));k.column=l.get("columnset").idHash[g.getAttribute("headers")];k.value=k.record.getValue(k.column.get("key"));break;case"row":k.record=l.get("recordset").getRecord(g.get("id"));break;case"theadCell":k.column=l.get("columnset").idHash[g.get("id")];break;}this.fire(m+j,k)||h.stopPropagation();}});c.namespace("Plugin").DataTableEvents=b;if(c.Plugin.addHostAttr){c.Plugin.addHostAttr("tableEvents",c.DataTable.Base,c.Plugin.DataTableEvents,function(d){if(c.Lang.isString(d)||c.Lang.isArray(d)){return{events:c.Array(d)};}return d;});}},"@VERSION@",{optional:["pluginattr"],requires:["datatable"]});