YUI.add("gallery-dp-datalist",function(c){var a=c.Node,b=c.ClassNameManager.getClassName;c.namespace("DP").DataList=c.Base.create("gallery-dp-datalist",c.Widget,[],{initializer:function(d){this.publish("select");},_renderItems:function(f){var d=c.bind(this.get("fnRender"),this),e=this.get("contentBox");f.each(function(g){e.append(this._renderItem(d,{value:g,id:g.get("id")}));},this);},_renderItem:function(d,e){return c.Node.create(c.substitute(this.LISTITEM_TEMPLATE,{content:d(e.value),className:this.getClassName("item"),wrapperClassName:this.getClassName("wrapper"),id:e.id||c.guid()}));},bindUI:function(){this.after("selectionChange",this._uiSetSelected,this);this.get("models").after("add",this._uiSetItems,this);this.get("models").after("remove",this._uiSetItems,this);this.get("models").after("reset",this._uiSetItems,this);this.get("models").on("*:delete",this._uiRemoveItems,this);this.get("models").on("*:change",this._uiUpdateItems,this);this.get("contentBox").delegate("click",c.bind(this._handleItemClicked,this),"."+this.getClassName("item"));},syncUI:function(){},destructor:function(){this.get("contentBox").detach("click");},_handleResponse:function(d,f){this.fire(d,{id:this._io,response:f.response});this._io=null;},_handleItemClicked:function(i){var d=i.currentTarget,h=d.get("id"),f=this.get("models").getById(h),g;if(undefined===f){this.get("recordset")._setHashTable();}g=f;this.set("selection",["#"+h]);this.fire("select",{itemid:h,item:g});},_uiSetItems:function(d){var f=this.get("models");this.get("contentBox").all("."+this.getClassName("item")).remove();this._renderItems(f);this._uiSetSelected();},_uiUpdateItems:function(h){var d,g,f,e=h.target;if(h.changed.hasOwnProperty("title")){d=c.bind(this.get("fnRender"),this),g=this._renderItem(d,{value:e,id:e.get("id")});f=this.get("contentBox").one("li#"+e.get("id"));f.replace(g);}},_uiRemoveItems:function(d){},_uiSetSelected:function(g){var d=this.get("selection"),f=this.get("contentBox");f.all("."+this.getClassName("item","selected")).removeClass(this.getClassName("item","selected"));f.all(d.join(",")).addClass(this.getClassName("item","selected"));},_ioCallback:{},ITEM_TEMPLATE:'<a href="#{anchor}">{title}</a>',LISTITEM_TEMPLATE:'<li class="{className}" id="{id}">{content}</li>',CONTENT_TEMPLATE:"<ul></ul>"},{NAME:"datalist",HTML_PARSER:{},ATTRS:{models:{value:null},fnRender:{value:function(d){return c.substitute(this.ITEM_TEMPLATE,{className:this.getClassName("item"),anchor:d["id"],title:d["title"]});},validator:c.Lang.isFunction},selection:{value:[],validator:c.Lang.isArray}}});},"@VERSION@",{requires:["widget","datasource","recordset"]});