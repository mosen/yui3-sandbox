YUI.add("gallery-dp-datalist",function(a){var b=a.Node,c=a.ClassNameManager.getClassName;a.namespace("DP").DataList=a.Base.create("gallery-dp-datalist",a.Widget,[],{initializer:function(a){this.publish("select")},_renderItems:function(b){var c=a.bind(this.get("fnRender"),this),d=this.get("contentBox");b.each(function(a){d.append(this._renderItem(c,{value:a,id:a.get("clientId")}))},this)},_renderItem:function(b,c){return a.Node.create(a.substitute(this.LISTITEM_TEMPLATE,{content:b(c.value),className:this.getClassName("item"),wrapperClassName:this.getClassName("wrapper"),id:c.id||a.guid()}))},bindUI:function(){this.after("selectionChange",this._uiSetSelected,this),this.get("models").after("add",this._uiAddItem,this),this.get("models").after("remove",this._uiRemoveItem,this),this.get("models").after("reset",this._uiSetItems,this),this.get("models").on("*:change",this._uiUpdateItems,this),this.get("contentBox").delegate("click",a.bind(this._handleItemClicked,this),"."+this.getClassName("item"))},syncUI:function(){},destructor:function(){this.get("contentBox").detach("click")},_handleItemClicked:function(a){var b=a.currentTarget,c=b.get("id"),d=this.get("models").getByClientId(c);this.set("selection",[d])},_uiSetItems:function(a){var b=this.get("models");this.get("contentBox").all("."+this.getClassName("item")).remove(),this._renderItems(b),this._uiSetSelected()},_uiAddItem:function(b){var c=b.model,d,e=this.get("fnRender");d=this._renderItem(a.bind(e,this),{value:c,id:c.get("clientId")}),this.get("contentBox").append(d)},_uiRemoveItem:function(a){var b=this.get("selection"),c=b.indexOf(a.model),d;c>-1&&(d=[this.get("models").item(this.get("models").size()-1)],this.set("selection",d)),this.get("contentBox").one("#"+a.model.get("clientId")).remove()},_uiUpdateItems:function(b){var c,d,e,f=b.target;b.changed.hasOwnProperty("title")&&(c=a.bind(this.get("fnRender"),this),d=this._renderItem(c,{value:f,id:f.get("clientId")}),e=this.get("contentBox").one("li#"+f.get("clientId")),e.replace(d),this.set("selection",[f]))},_uiRemoveItems:function(a){},_uiSetSelected:function(b){var c=this.get("selection"),d=this.get("contentBox"),e;d.all("."+this.getClassName("item","selected")).removeClass(this.getClassName("item","selected")),a.Array.each(c,function(a){e=a.get("clientId"),this.fire("select",{itemid:e,item:a}),d.one("#"+e).addClass(this.getClassName("item","selected"))},this)},ITEM_TEMPLATE:'<a href="#{anchor}">{title}</a>',LISTITEM_TEMPLATE:'<li class="{className}" id="{id}">{content}</li>',CONTENT_TEMPLATE:"<ul></ul>"},{NAME:"datalist",HTML_PARSER:{},ATTRS:{models:{value:null},fnRender:{value:function(b){return a.substitute(this.ITEM_TEMPLATE,{className:this.getClassName("item"),anchor:b.id,title:b.title})},validator:a.Lang.isFunction},selection:{value:[],validator:a.Lang.isArray},selectNewItems:{value:!0,validator:a.Lang.isBoolean}}})},"1.0.0",{skinnable:!0})