YUI.add("gallery-dp-xpicker",function(a){var b=a.ClassNameManager,c="gallery-dp-xpicker",d=b.getClassName(c,"content"),e="cell",f="list",g="null",h="active",i="delay",j=b.getClassName(c,"content","left"),k=b.getClassName(c,"content","right");a.namespace("DP").Xpicker=a.Base.create("gallery-dp-xpicker",a.Widget,[],{initializer:function(){this.publish("select",{defaultFn:this._defFnSelect})},destructor:function(){},bindUI:function(){this.get("contentBox").delegate("click",a.bind(this._handleClick,this),"."+this.getClassName(e)),this.get("contentBox").delegate("mouseover",a.bind(this._handleOver,this),"."+this.getClassName(e)),this.get("contentBox").delegate("mouseout",a.bind(this._handleOut,this),"."+this.getClassName(e))},syncUI:function(){a.Array.each(a.Object.keys(this._listIdHash),function(a){var b=this.get("contentBox").one("#"+a);this._listIdSelection[a]=b.one(":first-child")},this),this._highlight()},renderUI:function(){var b=this.get("lists"),c=a.Object.keys(this._listIdHash),d=this.TEMPLATE_ITEM,h=this.TEMPLATE_ROW,i=this.getClassName(e),l=this.getClassName(f),m=[];a.Array.each(c,function(c){var e=this._listIdHash[c],f=a.Node.create(a.Lang.substitute(h,{className:l,id:c}));a.Array.each(b[e],function(b){var c=a.Node.create(a.Lang.substitute(d,{title:b.title,className:i}));c.setData(b),f.append(c)}),m.push(f)},this),a.Array.each(m,function(a){this.get("contentBox").one("."+k).append(a)},this);if(this.get("showNullOption")===!0){var n=a.guid(),o=this.getClassName(g);this._nullOptionNode=a.Node.create(a.Lang.sub(this.TEMPLATE_ITEM_NULLOPTION,{listClassName:l,itemClassName:o+" "+i,title:"None",id:n})),this.get("contentBox").one("."+j).append(this._nullOptionNode)}},_handleClick:function(a){this._nullOptionNode.contains(a.target)?this.fire("select",{selection:this._getAttrNullSelection()}):this.fire("select",{selection:this.get("selection")})},_defFnSelect:function(a){this.hide()},_handleOver:function(b){var c=b.target,d=this.get(i);this._timer&&(this._timer.cancel(),this._timer=null),this._timer=a.later(d,this,this._highlight,c)},_handleOut:function(a){this._timer&&(this._timer.cancel(),this._timer=null)},_highlight:function(b){a.Array.each(a.Object.keys(this._listIdHash),function(c){a.one("ol#"+c).contains(b)&&(this._listIdSelection[c]=b)},this),this.get("contentBox").all("li").removeClass(this.getClassName(h)),a.Array.each(a.Object.keys(this._listIdSelection),function(a){this._listIdSelection[a].addClass(this.getClassName(h))},this),this._uiSetIndent()},_uiSetIndent:function(){var a=this.get("contentBox").one("."+k).all("ol"),b=this.getClassName(h),c=a.item(0).getX(),d=0,e=0;for(;e<a.size();e++){var f=a.item(e);f.transition({left:d+"px",easing:"ease-out",duration:.25}),a.item(e).one("."+b)&&(d=a.item(e).one("."+b).getX()-c)}},_timer:null,_initListsHash:function(b){a.Array.each(a.Object.keys(b),function(b){this._listIdHash[a.guid()]=b},this)},_getAttrSelection:function(){var b={};return a.Array.each(a.Object.keys(this._listIdHash),function(a){b[this._listIdHash[a]]=this._listIdSelection[a].getData()},this),b},_getAttrNullSelection:function(){var b={};return a.Array.each(a.Object.keys(this._listIdHash),function(a){b[this._listIdHash[a]]={title:"",value:null}},this),b},_listIdHash:{},_listIdSelection:{},TEMPLATE_ROW:'<ol class="{className}" id="{id}"></ol>',TEMPLATE_ITEM:'<li class="{className}">{title}</li>',TEMPLATE_ITEM_NULLOPTION:'<ol id="{id}" class="{listClassName}"><li class="{itemClassName}">{title}</li></ol>',CONTENT_TEMPLATE:'<div class="'+d+'"><div class="'+j+'"></div><div class="'+k+'"></div></div>'},{NAME:"xPicker",NS:"xpicker",ATTRS:{delay:{value:15},lists:{value:{},setter:"_initListsHash"},selection:{readOnly:!0,getter:"_getAttrSelection"},showNullOption:{value:!0}}})},"1.0.0",{requires:["node","node-screen","base","widget","transition"],skinnable:!0})